<% content_for :title, "Code QR - #{@site.name}" %>

<!-- Page Header -->
<div class="card no-print">
  <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
    <div>
      <h1 style="font-size: 2.25rem; font-weight: 700; background: linear-gradient(135deg, #00D4FF, #00FFE0); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 0.5rem;">
        Code QR pour le Site
      </h1>
      <p style="color: rgba(255, 255, 255, 0.7); font-size: 1.125rem;">
        <%= @site.name %> - <%= @site.code %>
      </p>
    </div>
    <div>
      <button onclick="window.print()" class="btn-primary">
        <svg class="btn-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"/>
        </svg>
        <span>Imprimer</span>
      </button>
    </div>
  </div>
</div>

<!-- QR Code Display -->
<div class="glass-card" style="max-width: 800px; margin: 0 auto; text-align: center;">
  <h2 style="font-size: 2rem; margin-bottom: 2rem; background: linear-gradient(135deg, #00D4FF, #00FFE0); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
    Code QR de Pointage
  </h2>
  
  <!-- Site Information -->
  <div style="margin-bottom: 2rem;">
    <p style="font-size: 1.5rem; font-weight: 600; color: rgba(255, 255, 255, 0.9); margin-bottom: 0.5rem;">
      <%= @site.name %>
    </p>
    <p style="color: rgba(255, 255, 255, 0.7); margin-top: 0.5rem;">
      Code: <span class="badge"><%= @site.code %></span>
    </p>
    <% if @site.address.present? %>
      <p style="color: rgba(255, 255, 255, 0.7); margin-top: 0.5rem;">
        <%= @site.address %>
      </p>
    <% end %>
  </div>

  <%= render 'shared/sites/qr_code_display', site: @site, style: 'manager' %>

  <!-- Action Buttons -->
  <div class="no-print" style="display: flex; gap: 1rem; justify-content: center; margin-top: 2rem; flex-wrap: wrap;">
    <button onclick="window.print()" class="btn-primary">
      <svg class="btn-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"/>
      </svg>
      <span>Imprimer le Code QR</span>
    </button>
    <%= link_to manager_site_path(@site), class: "btn-secondary" do %>
      <svg class="btn-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
      </svg>
      <span>Retour</span>
    <% end %>
  </div>
</div>

<!-- Print-specific styles -->
<style media="print">
  /* Hide UI elements */
  .no-print,
  nav,
  header,
  footer,
  .admin-header,
  .admin-footer,
  .burger-menu,
  .mobile-nav-menu,
  .mobile-nav-overlay,
  .profile-dropdown {
    display: none !important;
  }
  
  /* Main container */
  .glass-card,
  .card {
    box-shadow: none !important;
    border: 1px solid #ddd;
    page-break-inside: avoid;
    padding: 1rem !important;
    margin: 0 !important;
  }
  
  /* Typography */
  body {
    background: white !important;
    color: black !important;
  }
  
  * {
    color: black !important;
  }
  
  h2 {
    font-size: 1.5rem !important;
    margin-bottom: 1rem !important;
    -webkit-text-fill-color: black !important;
  }
  
  .glass-card > div:first-of-type {
    margin-bottom: 1rem !important;
  }
  
  .glass-card > div:first-of-type p:first-child {
    font-size: 1.25rem !important;
    margin-bottom: 0.25rem !important;
  }
  
  .glass-card > div:first-of-type p {
    margin-top: 0.5rem !important;
  }
  
  .badge {
    color: black !important;
    background: white !important;
    border: 1px solid #000 !important;
  }
  
  /* Page settings */
  @page {
    margin: 1.5cm;
    size: portrait;
  }
  
  main {
    padding: 0 !important;
    margin: 0 !important;
  }
</style>
