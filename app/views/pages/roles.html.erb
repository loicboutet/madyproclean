<% content_for :title, "Rôles et Accès - Mady ProClean" %>

<div class="container">
    <!-- Header -->
    <header class="header">
        <div class="header-back">
            <a href="/" class="btn-secondary">
                <svg class="btn-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                </svg>
                Retour
            </a>
        </div>
        <h1>Rôles et Accès Système</h1>
        <p class="subtitle">Cartographie des permissions par rôle utilisateur</p>
    </header>

    <!-- Alert Banner -->
    <div class="alert alert-info">
        <strong>Référence:</strong> Cette page présente les routes GET accessibles par chaque rôle utilisateur selon la spécification du système.
    </div>

    <!-- Roles Grid -->
    <section class="roles-grid">
        <!-- Admin Card -->
        <div class="glass-card">
            <div class="role-header">
                <h2><%= @roles_data[:admin][:name] %></h2>
                <p class="role-count"><%= @roles_data[:admin][:count] %></p>
                <span class="badge-success"><%= @roles_data[:admin][:access_level] %></span>
                <p class="role-description"><%= @roles_data[:admin][:description] %></p>
            </div>
            
            <h3><%= @roles_data[:admin][:routes].length %> Routes Disponibles</h3>
            <ul class="routes-list">
                <% @roles_data[:admin][:routes].each do |route| %>
                    <li class="route-item">
                        <% if route[:clickable] %>
                            <a href="<%= route[:path] %>">
                                <div class="route-path clickable">GET <%= route[:path] %></div>
                                <p class="route-description"><%= route[:description] %></p>
                            </a>
                        <% else %>
                            <div class="route-path">GET <%= route[:path] %></div>
                            <p class="route-description"><%= route[:description] %></p>
                        <% end %>
                    </li>
                <% end %>
            </ul>
        </div>

        <!-- Manager Card -->
        <div class="glass-card">
            <div class="role-header">
                <h2><%= @roles_data[:manager][:name] %></h2>
                <p class="role-count"><%= @roles_data[:manager][:count] %></p>
                <span class="badge-success"><%= @roles_data[:manager][:access_level] %></span>
                <p class="role-description"><%= @roles_data[:manager][:description] %></p>
            </div>
            
            <h3><%= @roles_data[:manager][:routes].length %> Routes Disponibles</h3>
            <ul class="routes-list">
                <% @roles_data[:manager][:routes].each do |route| %>
                    <li class="route-item">
                        <% if route[:clickable] %>
                            <a href="<%= route[:path] %>">
                                <div class="route-path clickable">GET <%= route[:path] %></div>
                                <p class="route-description"><%= route[:description] %></p>
                            </a>
                        <% else %>
                            <div class="route-path">GET <%= route[:path] %></div>
                            <p class="route-description"><%= route[:description] %></p>
                        <% end %>
                    </li>
                <% end %>
            </ul>
        </div>

        <!-- Agent Card -->
        <div class="glass-card">
            <div class="role-header">
                <h2><%= @roles_data[:agent][:name] %></h2>
                <p class="role-count"><%= @roles_data[:agent][:count] %></p>
                <span class="badge-warning"><%= @roles_data[:agent][:access_level] %></span>
                <p class="role-description"><%= @roles_data[:agent][:description] %></p>
            </div>
            
            <h3><%= @roles_data[:agent][:routes].length %> Routes Disponibles</h3>
            <ul class="routes-list">
                <% @roles_data[:agent][:routes].each do |route| %>
                    <li class="route-item">
                        <% if route[:clickable] %>
                            <a href="<%= route[:path] %>">
                                <div class="route-path clickable">GET <%= route[:path] %></div>
                                <p class="route-description"><%= route[:description] %></p>
                            </a>
                        <% else %>
                            <div class="route-path">GET <%= route[:path] %></div>
                            <p class="route-description"><%= route[:description] %></p>
                        <% end %>
                    </li>
                <% end %>
            </ul>
        </div>
    </section>

    <div class="divider"></div>

    <!-- Footer -->
    <div style="text-align: center; margin-top: 3rem; padding-top: 2rem; border-top: 1px solid rgba(0, 212, 255, 0.2);">
        <p style="color: rgba(255, 255, 255, 0.5); font-size: 0.875rem;">
            © 2025 Mady ProClean - Système de Gestion du Temps et RH
        </p>
        <p style="color: rgba(255, 255, 255, 0.4); font-size: 0.75rem; margin-top: 0.5rem;">
            Documentation des rôles et permissions système
        </p>
    </div>
</div>
