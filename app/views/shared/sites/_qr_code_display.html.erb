<%# Shared QR code display for QR code page %>
<%# Parameters:
  - site: The site object to display
  - style: 'admin' or 'manager' for styling variations
%>
<% style ||= 'admin' %>

<!-- QR Code Image -->
<div <% if style == 'manager' %>style="margin-bottom: 2rem; padding: 2rem; background: white; border-radius: 1rem; display: inline-block;"<% else %>class="mb-6" style="padding: 2rem; background: white; border-radius: 1rem; display: inline-block;"<% end %>>
  <%= site.qr_code_svg(host: request.host_with_port).html_safe %>
</div>

<% if style == 'admin' %>
  <div class="divider"></div>
<% end %>

<!-- Instructions -->
<div <% if style == 'admin' %>class="alert alert-info mb-6" style="text-align: left;"<% else %>class="card" style="text-align: left; background: rgba(0, 212, 255, 0.1); border: 1px solid var(--cyan-electric); margin-bottom: 2rem;"<% end %>>
  <strong <% if style == 'manager' %>style="color: var(--cyan-electric); font-size: 1.125rem;"<% end %>>Instructions pour les agents:</strong>
  <ol style="margin-top: 1rem; margin-left: 1.5rem;<% if style == 'manager' %> color: rgba(255, 255, 255, 0.9);<% end %>">
    <li>Scannez ce code QR avec votre smartphone</li>
    <li>Connectez-vous avec votre identifiant</li>
    <li>Pointez votre arrivée ou départ</li>
  </ol>
</div>

<% if style == 'admin' %>
  <!-- Technical Information -->
  <div class="card" style="background: rgba(0, 0, 0, 0.05); text-align: left;">
    <h3 class="mb-4">Informations Techniques</h3>
    <div class="space-y-3">
      <div>
        <p class="text-sm opacity-70">URL de pointage</p>
        <p class="font-mono text-sm break-all"><%= site.qr_code_url(host: request.host_with_port) %></p>
      </div>
      <div>
        <p class="text-sm opacity-70">Token de sécurité</p>
        <p class="font-mono text-sm break-all"><%= site.qr_code_token %></p>
      </div>
      <div>
        <p class="text-sm opacity-70">Statut</p>
        <% if site.active %>
          <span class="badge-success">✓ Actif</span>
        <% else %>
          <span class="badge-warning">✗ Inactif</span>
        <% end %>
      </div>
    </div>
  </div>
<% else %>
  <!-- Technical Information -->
  <div class="card" style="background: rgba(0, 0, 0, 0.3); text-align: left;">
    <h3 style="margin-bottom: 1.5rem; color: var(--cyan-electric);">Informations Techniques</h3>
    <div style="display: grid; gap: 1rem;">
      <div>
        <p style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7); margin-bottom: 0.5rem;">URL de pointage</p>
        <p style="font-family: monospace; font-size: 0.875rem; color: rgba(255, 255, 255, 0.9); word-break: break-all; background: rgba(0, 212, 255, 0.1); padding: 0.75rem; border-radius: 0.5rem;">
          <%= site.qr_code_url(host: request.host_with_port) %>
        </p>
      </div>
      <div>
        <p style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7); margin-bottom: 0.5rem;">Token de sécurité</p>
        <p style="font-family: monospace; font-size: 0.875rem; color: rgba(255, 255, 255, 0.9); word-break: break-all; background: rgba(0, 212, 255, 0.1); padding: 0.75rem; border-radius: 0.5rem;">
          <%= site.qr_code_token %>
        </p>
      </div>
      <div>
        <p style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7); margin-bottom: 0.5rem;">Statut</p>
        <% if site.active %>
          <span class="badge-success">✓ Actif</span>
        <% else %>
          <span class="badge-warning">✗ Inactif</span>
        <% end %>
      </div>
    </div>
  </div>
<% end %>
